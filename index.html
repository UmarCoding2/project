<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="utility.css">
    <title>Umar Spotify - Web Player: Music for everyone</title>
</head>

<body>
    <div class="container flex bg-black">
        <div class="left">
            <div class="close">
                <img width="30" class="invert" src="img/close.svg" alt="">
            </div>
            <div class="home bg-grey rounded m-1 p-1">
                <div class="logo"><img width="110" class="invert" src="img/logo.svg" alt="">
                </div>
                <ul>
                    <li><img class="invert" src="img/home.svg" alt="home">Home
                    </li>
                    <li>
                        <!-- Place this in your HTML, e.g., inside <nav> or <header> -->
                        <div class="search-container">
                            <button id="searchBtn" aria-label="Open search" class="search-btn">
                                <img class="invert" width="20" height="20" src="img/search.svg" alt="">
                                Search
                            </button>
                            <form id="searchForm" class="search-form">
                                <input class="searchbar" type="text" id="searchInput" placeholder="Search..." aria-label="Search input">
                                <button type="submit" aria-label="Submit search">Go</button>
                                <button type="button" id="closeBtn" aria-label="Close search">Ã—</button>
                            </form>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="library bg-grey rounded m-1 p-1">
                <div class="heading">
                    <img class="invert" src="img/playlist.svg" alt="">
                    <h2>
                        Your
                        Library
                    </h2>
                </div>

                <div class="songList">

                    <ul>

                    </ul>
                </div>

                <div class="footer">
                    <div><a href="https://www.spotify.com/jp/legal/"><span>Legal</span></a>
                    </div>
                    <div><a href="https://www.spotify.com/jp/privacy/"><span>Privacy
                                Center</span></a>
                    </div>
                    <div><a href="https://www.spotify.com/jp/legal/privacy-policy/"><span>Privacy
                                Policy</span></a>
                    </div>
                    <div><a href="https://www.spotify.com/jp/legal/cookies-policy/"><span>Cookies</span></a>
                    </div>
                    <div><a href="https://www.spotify.com/jp/legal/privacy-policy/#s3"><span>About
                                Ads</span></a>
                    </div>
                    <div><a href="https://www.spotify.com/jp/accessibility/"><span>Accessibility</span></a>
                    </div>
                </div>
            </div>


        </div>
        <div class="right bg-grey rounded">
            <div class="header">
                <div class="nav">
                    <div class="hamburgerContainer">

                        <img width="40" class="invert hamburger" src="img/hamburger.svg" alt="">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15 6L9.70711 11.2929C9.37377 11.6262 9.20711 11.7929 9.20711 12C9.20711 12.2071 9.37377 12.3738 9.70711 12.7071L15 18"
                                stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9 18L14.2929 12.7071C14.6262 12.3738 14.7929 12.2071 14.7929 12C14.7929 11.7929 14.6262 11.6262 14.2929 11.2929L9 6"
                                stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <div class="buttons">
                    <button class="signupbtn"> <a target="_blank" href="login.html">Sign
                            up</a></button>
                    <button class="loginbtn"> <a target="_blank" href="signup.html">Log
                            in</a></button>
                </div>
            </div>
            <div class="spotifyPlaylists">
                <h1>Spotify Playlists</h1>
                <div class="cardContainer">
                    <!-- Dynamic cards will be inserted here by script.js -->
                </div>

                <div class="playbar">
                    <div class="seekbar">
                        <div class="circle">

                        </div>
                    </div>
                    <div class="abovebar">


                        <div class="songinfo">

                        </div>
                        <div class="songbuttons">
                            <img width="35" id="previous" src="img/pervios.svg" alt="">
                            <img width="35" id="play" src="img/play.svg" alt="">
                            <img width="35" id="next" src="img/next.svg" alt="">
                        </div>
                        <div class="timevol">


                            <div class="songtime">

                            </div>
                            <div class="volume">
                                <img width="25" src="img/volume.svg" alt="">
                                <div class="range">
                                    <input type="range" name="volume" id="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        // ...existing code...
        

            document.addEventListener('DOMContentLoaded', function() {
    const searchBtn = document.getElementById('searchBtn');
            const searchForm = document.getElementById('searchForm');
            const closeBtn = document.getElementById('closeBtn');
            const searchInput = document.getElementById('searchInput');
            const backdrop = document.createElement('div'); // Dynamic backdrop
            backdrop.className = 'search-backdrop';
            document.body.appendChild(backdrop);

            // Toggle search form
            function toggleSearch() {
        const isActive = searchForm.classList.contains('active');
            searchForm.classList.toggle('active');
            backdrop.style.display = isActive ? 'none' : 'block';
            if (!isActive) {
                searchInput.focus(); // Auto-focus input
        } else {
                // if we just closed the search, clear any highlights/filters
                try { window.clearSearchResults && window.clearSearchResults(); } catch(e){}
        }
    }

            searchBtn.addEventListener('click', toggleSearch);
            closeBtn.addEventListener('click', toggleSearch);
            backdrop.addEventListener('click', toggleSearch); // Click outside to close

            // Handle form submission
            searchForm.addEventListener('submit', function(event) {
                event.preventDefault();
            const query = searchInput.value.trim();
            if (query) {
                // Call the app search handler
                try { window.performSongSearch && window.performSongSearch(query); } catch(e) { console.error('Search handler failed', e); }
            }
            toggleSearch(); // Close after search
    });

            // Keyboard support (Escape to close)
            document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && searchForm.classList.contains('active')) {
                toggleSearch();
        }
    });
});
document.addEventListener('DOMContentLoaded', () => {
  try {
    const searchBtn = document.getElementById('searchBtn');
            const searchForm = document.getElementById('searchForm');
            const closeBtn = document.getElementById('closeBtn');
            const searchInput = document.getElementById('searchInput');

            if (!searchBtn || !searchForm || !closeBtn || !searchInput) {
                console.error('Search UI element missing:', { searchBtn, searchForm, closeBtn, searchInput });
            return;
    }

            const backdrop = document.createElement('div');
            backdrop.className = 'search-backdrop';
            document.body.appendChild(backdrop);

            function setSearchOpen(open) {
      if (open) {
                searchForm.classList.add('active');
            backdrop.style.display = 'block';
            searchBtn.setAttribute('aria-expanded', 'true');
        // small delay to ensure CSS transition finished before focusing
        setTimeout(() => searchInput.focus(), 10);
    } else {
            searchForm.classList.remove('active');
        backdrop.style.display = 'none';
        searchBtn.setAttribute('aria-expanded', 'false');
        try { window.clearSearchResults && window.clearSearchResults(); } catch(e){}
    }
    }

            // initialize aria state
            searchBtn.setAttribute('aria-expanded', 'false');

    searchBtn.addEventListener('click', (e) => {e.preventDefault(); setSearchOpen(true); });
    closeBtn.addEventListener('click', (e) => {e.preventDefault(); setSearchOpen(false); });
    backdrop.addEventListener('click', () => setSearchOpen(false));

        searchForm.addEventListener('submit', (e) => {
                                e.preventDefault();
                        const query = searchInput.value.trim();
                        if (!query) {console.log('Empty search query'); setSearchOpen(false); return; }
                        console.log('Search query:', query);
                        try { window.performSongSearch && window.performSongSearch(query); } catch (err) { console.error('Search handler failed', err); }
            setSearchOpen(false);
        });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && searchForm.classList.contains('active')) setSearchOpen(false);
    });
  } catch (err) {
    console.error('Search initialization failed', err);
  }
});
 // ...existing code...
  


    </script>
</body>

</html>